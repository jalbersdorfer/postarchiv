<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Juergen Albersdorfer">
    <meta name="generator" content="Hugo 0.80.0">
    <title>ELDOAR Search</title>
    <meta name="description" content="For Search you know">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> -->
    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    <style type="text/css">
      .fullwidth {
        width:90%;
	max-width: 540px;
      }
      .center {
        margin:auto;
      }
      .nodeco {
        text-decoration: none;
      }
      .img {
        overflow: hidden;
	height: 300px;
      }
      /* Delete button confirmation state */
      .btn-delete-confirm {
        transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
        position: relative;
        overflow: hidden;
      }
      .btn-delete-confirm::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        height: 2px;
        width: 100%;
        background: rgba(255, 255, 255, 0.7);
        transform-origin: left center;
        animation: delete-countdown 3s linear forwards;
      }
      @keyframes delete-countdown {
        from { transform: scaleX(1); }
        to   { transform: scaleX(0); }
      }
  </style>
  <script type="text/javascript">
    const _deleteTimers = new Map();

    function MyDelete(id, btn) {
      if (btn.dataset.confirmPending === '1') {
        // Second click: execute delete
        clearTimeout(_deleteTimers.get(id));
        _deleteTimers.delete(id);
        var xhttp = new XMLHttpRequest();
        xhttp.onloadend = function() {
          btn.closest('.col').remove();
        };
        xhttp.open("DELETE", `/file/${id}`, true);
        xhttp.send();
      } else {
        // First click: enter confirmation state
        btn.dataset.confirmPending = '1';
        btn.classList.remove('btn-outline-secondary');
        btn.classList.add('btn-danger', 'btn-delete-confirm');
        btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
          <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
          <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
        </svg> Delete?`;

        _deleteTimers.set(id, setTimeout(() => {
          _deleteTimers.delete(id);
          btn.dataset.confirmPending = '0';
          btn.classList.remove('btn-danger', 'btn-delete-confirm');
          btn.classList.add('btn-outline-secondary');
          btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
          </svg>`;
        }, 3000));
      }
    }
  </script>
  </head>
  <body>


<header>
  <div class="collapse bg-dark" id="navbarHeader">
    <div class="container">
      <div class="row">
        <div class="col-sm-8 col-md-7 py-4">
          <h4 class="text-white">About</h4>
          <p class="text-muted">Search your PDF Documents</p>
        </div>
        <div class="col-sm-4 offset-md-1 py-4">
          <h4 class="text-white">Contact</h4>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white">Follow on Twitter</a></li>
            <li><a href="#" class="text-white">Like on Facebook</a></li>
            <li><a href="#" class="text-white">Email me</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="navbar navbar-dark bg-dark shadow-sm">
    <div class="container">
      <a href="#" class="navbar-brand d-flex align-items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="me-2" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
        <strong>ELDOAR</strong>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </div>
</header>

<main>

  <section class="py-5 text-center container">
    <div class="row py-lg-5">
      <div class="col-lg-6 col-md-8 mx-auto">
      <a href="/" class="nodeco">
      <pre>

_______       ______   ____  ______  _____
|______ |     |     \ |    | |____| |____/
|______ |____ |_____/ |____| |    | |   \_
 
Electronic Document Archive v[% version %]
</pre>
</a>
      <form>
      <div class="form-group">
        <input type="text" class="fullwidth" autofocus="autofocus" id="search" name="search" />
        </div>
        
        <input type="submit" class="btn btn-primary my-2" value="Suche" />
      </form>
<a href="/upload" class="btn btn-secondary my-2"><pre>Upload</pre></a>
      </div>
    </div>
  </section>
</main>


  <div class="album py-5 bg-light">
    <div class="container">
      <div class="alert alert-success" role="alert">[% cnt %] Ergebnisse</div>

      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">

	    [% FOREACH doc IN docs %]
        <div class="col" data-doc-id="[% doc.id %]">
          <div class="card shadow-sm">
            <a href="file/[% doc.title %]"><img src='[% doc.title %].jpg' height=100% width=100% /></a>
            <div class="card-body">
              <p class="card-text">[% doc.title %]</p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group">
			<button type="button" class="btn btn-sm btn-outline-secondary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-zoom-in" viewBox="0 0 16 16">
					  <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
					    <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
					      <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>
				</svg></button>
				<button type="button" class="btn btn-sm btn-outline-secondary" onclick="MyDelete(this.closest('[data-doc-id]').dataset.docId, this); this.blur(); return true;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
		    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
		    <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
			  </svg></button>
                </div>
                <small class="text-muted">
                  <span class="doc-date" data-id="[% doc.id %]" style="cursor:pointer" title="Click to edit date"></span>
                </small>
              </div>
            </div>
          </div>
        </div>

	    [% END %]






      </div>
    </div>
  </div>

</main>

<footer class="text-muted py-5">
  <div class="container">
    <p class="float-end mb-1">
      <a href="#">Back to top</a>
    </p>
    <p class="mb-1">ELDOAR Search is &copy; Bootstrap, but please download and customize it for yourself!</p>
    <p class="mb-0">Get Source? <a href="/">Visit the homepage</a> or read our <a href="../getting-started/introduction/">getting started guide</a>.</p>
  </div>
</footer>


    <script src="./js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript">
    function idToDate(id) {
      return new Date(parseInt(id)).toISOString().slice(0, 10);
    }

    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.doc-date').forEach(function (span) {
        span.textContent = idToDate(span.dataset.id);

        span.addEventListener('click', function () {
          var col = span.closest('[data-doc-id]');
          var currentDate = span.textContent;
          var input = document.createElement('input');
          input.type = 'date';
          input.value = currentDate;
          span.replaceWith(input);
          input.focus();

          function saveDate() {
            var newDate = input.value;
            if (!newDate || newDate === currentDate) {
              input.replaceWith(span);
              return;
            }
            var id = span.dataset.id;
            var xhr = new XMLHttpRequest();
            xhr.onloadend = function () {
              if (xhr.status === 200) {
                var resp = JSON.parse(xhr.responseText);
                span.dataset.id   = resp.new_id;
                col.dataset.docId = resp.new_id;
                span.textContent  = newDate;
              } else {
                span.textContent = currentDate;
              }
              input.replaceWith(span);
            };
            xhr.open('PUT', '/file/' + id, true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send('date=' + encodeURIComponent(newDate));
          }

          input.addEventListener('blur', saveDate);
          input.addEventListener('keydown', function (e) {
            if (e.key === 'Enter')  { input.blur(); }
            if (e.key === 'Escape') { input.replaceWith(span); }
          });
        });
      });
    });
  </script>
</body>
</html>
      



